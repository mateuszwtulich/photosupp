<mat-horizontal-stepper linear #stepper id="stepper">
  <mat-step [stepControl]="firstFormGroup">
    <form [formGroup]="firstFormGroup">
      <ng-template matStepLabel>{{ 'pricing.1st-step' | translate }}</ng-template>
      <mat-accordion>
        <mat-radio-group formControlName="firstCtrl">
          <mat-expansion-panel #panel *ngFor="let service of services">
            <mat-expansion-panel-header (click)="setService(panel.expanded, service)">

              <mat-panel-title id="service-title">
                <mat-radio-button [checked]="panel.expanded && firstFormGroup.controls['firstCtrl'].value"> {{service.name}} </mat-radio-button>
              </mat-panel-title>
              <mat-panel-description id="service-price">
                {{(service.basePrice * 0.9).toFixed()}} - {{(service.basePrice * 1.1).toFixed()}} PLN
              </mat-panel-description>

            </mat-expansion-panel-header>
            <p>{{service.description}}</p>
          </mat-expansion-panel>
        </mat-radio-group>
      </mat-accordion>
      <div>
        <button mat-raised-button color="accent" matStepperNext class="button">{{ 'pricing.next' | translate }}</button>
      </div>
    </form>
  </mat-step>
  <mat-step>
    <form>
      <ng-template matStepLabel>{{ 'pricing.2nd-step' | translate }}</ng-template>
      <mat-list *ngIf="firstFormGroup.controls['firstCtrl'].value">
        <mat-list-item *ngFor="let indicator of firstFormGroup.controls['firstCtrl'].value.indicators; let i = index"
          [attr.data-index]="i" class="mat-elevation-z4">

          <div matLine id="indicator">
          <div id="indicator-title">
           <p id="title">{{indicator.name}}: </p>
           <mat-chip-list>
           <mat-chip color="primary" selected> {{priceIndicators[i].amount}}</mat-chip>
          </mat-chip-list>
          </div>

          <div id="indicator-slider">
          <mat-slider thumbLabel [min]="indicator.baseAmount" [max]="indicator.baseAmount*25" [tickInterval]="1"
              [(value)]="priceIndicators[i].amount" name="indicator.id" [vertical]="vertical">
            </mat-slider>
          </div>

          <div id="indicator-price">
            <mat-chip-list>
              <mat-chip color="primary" selected>+{{calculateTheIndicatorCost(i, indicator)}} PLN</mat-chip>
             </mat-chip-list>
 
          </div>
        </div>

          <p matLine color="primary" id="indicator-description">{{indicator.description}}</p>

        </mat-list-item>
      </mat-list>
      <div>
        <button mat-raised-button class="back" color="accent" matStepperPrevious>{{ 'pricing.back' | translate }}</button>
        <button mat-raised-button color="accent" matStepperNext>{{ 'pricing.next' | translate }}</button>
      </div>
    </form>
  </mat-step>
  <mat-step>
    <ng-template matStepLabel>{{ 'pricing.3rd-step' | translate }}</ng-template>
    <div *ngIf="firstFormGroup.controls['firstCtrl'].value" id="pricing-end">

    <p id="pricing-title">{{ 'pricing.calculation' | translate }}</p>
    <mat-chip-list>
      <mat-chip color="primary" selected> {{ (calculateThePredictedCost() * 0.8).toFixed() }} - {{ (calculateThePredictedCost() * 1.2).toFixed() }} PLN</mat-chip>
     </mat-chip-list>
    </div>
    <p>{{ 'pricing.warning' | translate }}</p>
    <div>
      <button mat-raised-button class="back" color="accent" matStepperPrevious>{{ 'pricing.back' | translate }}</button>
      <button mat-raised-button color="accent" (click)="stepper.reset()">{{ 'pricing.reset' | translate }}</button>
    </div>
  </mat-step>
</mat-horizontal-stepper>